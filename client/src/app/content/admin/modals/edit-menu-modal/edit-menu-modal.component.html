<!-- Modal header -->
<div class="modal-header">
  <h2 mat-dialog-title> Menu </h2>

  <button mat-button mat-dialog-close class="close-btn" (click)="close()">X</button>
</div>

<!-- Title & Description row -->
<mat-dialog-content [formGroup]="form" class="menu-edit-form">
  <div class="top-row">
   <mat-form-field>
     <mat-label class="field">
       Title
     </mat-label>
     <input matInput type="text" formControlName="title" />

   </mat-form-field>
   <mat-form-field>
     <mat-label class="field">
       Description
     </mat-label>
     <input matInput type="text" formControlName="description" />

   </mat-form-field>
  </div>

  <!-- Category buttons -->
  <div class="category-tabs">
    @for ( catCtrl of categories.controls; let i = $index; track i) {
      <!-- catCtrl is a FormGroup for a category -->
      <button
      mat-button
        type="button"
        [class.active]="i === selectedCategoryIndex"
        (click)="selectCategory(i)"
      >
        {{ catCtrl.value.name }}
      </button>
    }
  </div>

  <!-- Items list for the selected category -->
  <div class="items-list">
    @if (selectedCategoryGroup) {
      @for ( itemCtrl of selectedItems.controls; let j = $index; track j ) {
        <div class="item-row" [formGroup]="getFormGroup(itemCtrl)">
         <mat-form-field>
           <mat-label>
             Item {{ j+1 }}
           </mat-label>
           <input matInput type="text" formControlName="name" />
         </mat-form-field>
          <mat-form-field>
            <mat-label>
              Price
            </mat-label>
            <input matInput type="number" formControlName="price" />

          </mat-form-field>
          <button mat-button type="button" class="remove-btn" (click)="removeItem(j)">x</button>
        </div>
      }
      <button mat-button type="button" class="add-item-btn" (click)="addItem()">+ Add Item</button>
    }
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button mat-dialog-close>Cancel</button>
  <button mat-button [mat-dialog-close]="true" (click)="save()">Save</button>
</mat-dialog-actions>
